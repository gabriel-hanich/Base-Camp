{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/globals/global-vars.service\";\nimport * as i2 from \"../../ui-components/heading-component/heading-component.component\";\nimport * as i3 from \"@angular/material/form-field\";\nimport * as i4 from \"@angular/material/select\";\nimport * as i5 from \"@angular/material/core\";\nimport * as i6 from \"../timetable-day/timetable-day.component\";\nexport let TimetableTableComponent = /*#__PURE__*/(() => {\n  class TimetableTableComponent {\n    constructor(globalVars) {\n      this.globalVars = globalVars;\n      this.dayList = [\"sunday\", \"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\"];\n      this.currentDay = this.dayList[new Date().getDay()];\n      this.currentWeek = this.globalVars.getVar(\"weekLetter\").toUpperCase();\n      this.weekAData = [];\n      this.weekBData = [];\n      this.displayData = [];\n      this.displayDay = 'monday';\n      this.displayWeek = 'a';\n      this.timeEmitter = new EventEmitter();\n    }\n\n    ngOnInit() {\n      var _a; // Capitalise currentDay\n\n\n      this.currentDay = this.currentDay.charAt(0).toUpperCase() + this.currentDay.slice(1);\n      (_a = document.getElementById(\"sideBar\")) === null || _a === void 0 ? void 0 : _a.classList.add(\"sidebar-retracted\"); // Get the timetable data\n      // Determine whether wk1 is A or B\n\n      if (this.globalVars.getVar(\"wk1IsWkA\") == \"true\") {\n        this.weekAData = JSON.parse(this.globalVars.getVar(\"wk1Data\"));\n        this.weekBData = JSON.parse(this.globalVars.getVar(\"wk2Data\"));\n      } else {\n        this.weekAData = JSON.parse(this.globalVars.getVar(\"wk2Data\"));\n        this.weekBData = JSON.parse(this.globalVars.getVar(\"wk1Data\"));\n      }\n\n      for (var i = 0; i < this.weekAData.length; i++) {\n        for (var k = 0; k < this.weekAData[i].length; k++) {\n          this.weekAData[i][k][\"startDate\"] = new Date(this.weekAData[i][k][\"startDate\"]);\n          this.weekAData[i][k][\"endDate\"] = new Date(this.weekAData[i][k][\"endDate\"]);\n        }\n      }\n\n      for (var i = 0; i < this.weekBData.length; i++) {\n        for (var k = 0; k < this.weekBData[i].length; k++) {\n          this.weekBData[i][k][\"startDate\"] = new Date(this.weekBData[i][k][\"startDate\"]);\n          this.weekBData[i][k][\"endDate\"] = new Date(this.weekBData[i][k][\"endDate\"]);\n        }\n      }\n\n      this.updateDisplayData();\n    }\n\n    setDisplayDay(day) {\n      this.displayDay = day;\n      this.updateDisplayData();\n    }\n\n    setDisplayWeek(week) {\n      this.displayWeek = week;\n      this.updateDisplayData();\n    }\n\n    updateDisplayData() {\n      let wkData;\n\n      if (this.displayWeek == 'a') {\n        wkData = this.weekAData;\n        this.displayData = this.weekAData[this.dayList.indexOf(this.displayDay) - 1];\n      } else {\n        wkData = this.weekBData;\n        this.displayData = this.weekBData[this.dayList.indexOf(this.displayDay) - 1];\n      }\n\n      for (var i = 0; i < wkData.length; i++) {\n        if (this.dayList[wkData[i][0].startDate.getDay()] == this.displayDay) {\n          this.displayData = wkData[i];\n        }\n      }\n    }\n\n    showTimes() {\n      this.timeEmitter.emit(\"WOOO\");\n    }\n\n  }\n\n  TimetableTableComponent.ɵfac = function TimetableTableComponent_Factory(t) {\n    return new (t || TimetableTableComponent)(i0.ɵɵdirectiveInject(i1.GlobalVarsService));\n  };\n\n  TimetableTableComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TimetableTableComponent,\n    selectors: [[\"app-timetable-table\"]],\n    decls: 31,\n    vars: 15,\n    consts: [[1, \"page-container\"], [1, \"heading-component-container\"], [\"line1Text\", \"Your Timetable\", 3, \"line2Text\"], [1, \"display-container\"], [1, \"display-text\"], [\"appearance\", \"fill\", 1, \"display-field\"], [1, \"display-selector\", 3, \"value\", \"valueChange\"], [3, \"value\"], [1, \"time-container\"], [1, \"time-btn\", \"animated-hover\", 3, \"click\"], [1, \"week-day-container\"], [1, \"week-day-component\", 3, \"timetableData\", \"isCurrentWeek\", \"displayEmitter\", \"doTimes\"]],\n    template: function TimetableTableComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵelement(2, \"app-heading-component\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 3)(4, \"h2\", 4);\n        i0.ɵɵtext(5, \"Display\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"mat-form-field\", 5)(7, \"mat-select\", 6);\n        i0.ɵɵlistener(\"valueChange\", function TimetableTableComponent_Template_mat_select_valueChange_7_listener($event) {\n          return ctx.setDisplayDay($event);\n        });\n        i0.ɵɵelementStart(8, \"mat-option\", 7);\n        i0.ɵɵtext(9, \"Monday\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"mat-option\", 7);\n        i0.ɵɵtext(11, \"Tuesday\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"mat-option\", 7);\n        i0.ɵɵtext(13, \"Wednesday\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"mat-option\", 7);\n        i0.ɵɵtext(15, \"Thursday\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"mat-option\", 7);\n        i0.ɵɵtext(17, \"Friday\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"h2\", 4);\n        i0.ɵɵtext(19, \"Of week\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"mat-form-field\", 5)(21, \"mat-select\", 6);\n        i0.ɵɵlistener(\"valueChange\", function TimetableTableComponent_Template_mat_select_valueChange_21_listener($event) {\n          return ctx.setDisplayWeek($event);\n        });\n        i0.ɵɵelementStart(22, \"mat-option\", 7);\n        i0.ɵɵtext(23, \"A\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"mat-option\", 7);\n        i0.ɵɵtext(25, \"B\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(26, \"div\", 8)(27, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function TimetableTableComponent_Template_button_click_27_listener() {\n          return ctx.showTimes();\n        });\n        i0.ɵɵtext(28, \"Show Times\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(29, \"div\", 10);\n        i0.ɵɵelement(30, \"app-timetable-day\", 11);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵpropertyInterpolate2(\"line2Text\", \"\", ctx.currentDay, \" Week \", ctx.currentWeek, \"\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"value\", \"monday\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"value\", \"monday\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"value\", \"tuesday\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"value\", \"wednesday\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"value\", \"thursday\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"value\", \"friday\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"value\", \"a\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"value\", \"a\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"value\", \"b\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"timetableData\", ctx.displayData)(\"isCurrentWeek\", false)(\"displayEmitter\", ctx.timeEmitter)(\"doTimes\", true);\n      }\n    },\n    directives: [i2.HeadingComponentComponent, i3.MatFormField, i4.MatSelect, i5.MatOption, i6.TimetableDayComponent],\n    styles: [\".time-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;margin:25px auto auto}.time-btn[_ngcontent-%COMP%]{width:150px;height:55px;background-color:var(--mid-bg-color);cursor:pointer;border:none;border-radius:15px 0;margin-bottom:10px}.display-container[_ngcontent-%COMP%]{width:95%;height:50px;margin:10px auto auto;display:flex;flex-direction:row;gap:15px;border-radius:15px 0;background-color:var(--bottom-bg-color);padding-bottom:20px}.display-text[_ngcontent-%COMP%]{font-size:1rem;margin-top:30px;font-weight:400;margin-left:15px}.display-field[_ngcontent-%COMP%]{width:150px}.week-day-container[_ngcontent-%COMP%]{width:45%;margin:auto;height:-moz-fit-content;height:fit-content}\"]\n  });\n  return TimetableTableComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}