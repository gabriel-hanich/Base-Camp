{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/globals/global-vars.service\";\nimport * as i2 from \"src/app/services/connections/connections.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../ui-components/toggle-switch/toggle-switch.component\";\n\nfunction UserSettingsComponent_div_0_app_toggle_switch_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-toggle-switch\", 10);\n    i0.ɵɵlistener(\"state\", function UserSettingsComponent_div_0_app_toggle_switch_4_Template_app_toggle_switch_state_0_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return ctx_r5.updateCloudState($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"label1\", \"Enable Cloud Sync\")(\"label2\", \"Disable Cloud Sync\")(\"defaultVal\", ctx_r4.defaultToggleVal)(\"elemID\", \"syncToggle\");\n  }\n}\n\nfunction UserSettingsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"h3\", 2);\n    i0.ɵɵtext(2, \"Sync your User Data to the cloud\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 9);\n    i0.ɵɵtemplate(4, UserSettingsComponent_div_0_app_toggle_switch_4_Template, 1, 4, \"app-toggle-switch\", 14);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.doCloudSync);\n  }\n}\n\nfunction UserSettingsComponent_p_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 5);\n    i0.ɵɵtext(1, \"Your Email\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UserSettingsComponent_input_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 15);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", true)(\"value\", ctx_r3.email);\n  }\n}\n\nexport let UserSettingsComponent = /*#__PURE__*/(() => {\n  class UserSettingsComponent {\n    constructor(globalVars, connections, router) {\n      this.globalVars = globalVars;\n      this.connections = connections;\n      this.router = router;\n      this.userName = \"\";\n      this.email = \"\";\n      this.defaultLabel = \"label1\";\n      this.errorMsg = \"\";\n    }\n\n    ngOnInit() {\n      this.doCloudSync = JSON.parse(this.globalVars.getVar(\"doCloudSync\"));\n      this.userName = this.globalVars.getVar(\"userName\");\n      this.email = this.globalVars.getVar(\"userEmail\");\n\n      if (this.doCloudSync) {\n        this.defaultToggleVal = \"label1\";\n      } else {\n        this.defaultToggleVal = \"label2\";\n      }\n\n      if (this.email == \"empty\") {\n        this.email = \"No Email Inputted\";\n      }\n\n      if (!JSON.parse(this.globalVars.getVar(\"showDisconnect\"))) {\n        this.defaultLabel = \"label2\";\n      }\n    }\n\n    updateCloudState(state) {\n      this.doCloudSync = state === \"Enable Cloud Sync\";\n\n      if (this.doCloudSync) {\n        this.connections.getPublicKey(); // Get the public key if the connection is toggled on\n      }\n\n      this.globalVars.setVar(\"doCloudSync\", JSON.stringify(this.doCloudSync));\n    }\n\n    updateUserSettings(event) {\n      event.preventDefault();\n      this.userName = document.getElementById(\"nameInput\").value;\n      this.globalVars.setVar(\"userName\", this.userName);\n      this.errorMsg = \"Saved :)\";\n      this.showErrorMsg(2500);\n    }\n\n    showErrorMsg(delay) {\n      var _a;\n\n      (_a = document.getElementById(\"errorBox\")) === null || _a === void 0 ? void 0 : _a.classList.add(\"showError\");\n      setTimeout(() => {\n        var _a;\n\n        (_a = document.getElementById(\"errorBox\")) === null || _a === void 0 ? void 0 : _a.classList.remove(\"showError\");\n      }, delay);\n    }\n\n    wipeApp() {\n      if (confirm(\"Are you sure you want to wipe the app.\\nThis will NOT delete data on the cloud, however will erase ALL your data if cloud sync is disabled\")) {\n        localStorage.clear();\n        setTimeout(() => {\n          this.router.navigate([\"setup/user\"]);\n        }, 50);\n      }\n    }\n\n    updateDisconnectMsg(value) {\n      this.globalVars.setVar(\"showDisconnect\", JSON.stringify(value == 'Show Disconnect Message'));\n    }\n\n  }\n\n  UserSettingsComponent.ɵfac = function UserSettingsComponent_Factory(t) {\n    return new (t || UserSettingsComponent)(i0.ɵɵdirectiveInject(i1.GlobalVarsService), i0.ɵɵdirectiveInject(i2.ConnectionsService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  UserSettingsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UserSettingsComponent,\n    selectors: [[\"app-user-settings\"]],\n    decls: 17,\n    vars: 8,\n    consts: [[\"class\", \"section-container\", 4, \"ngIf\"], [1, \"section-container\", \"large\"], [1, \"heading-text\"], [1, \"form-container\", 3, \"submit\"], [\"userForm\", \"\"], [1, \"form-text\"], [\"type\", \"text\", \"name\", \"Name\", \"id\", \"nameInput\", \"placeholder\", \"Name\", 1, \"form-input\", 3, \"value\"], [\"class\", \"form-text\", 4, \"ngIf\"], [\"type\", \"text\", \"name\", \"Email\", \"id\", \"emailInput\", \"class\", \"form-input\", \"placeholder\", \"Email\", 3, \"disabled\", \"value\", 4, \"ngIf\"], [1, \"toggle-container\"], [3, \"label1\", \"label2\", \"defaultVal\", \"elemID\", \"state\"], [1, \"form-btn\", \"animated-hover\", 3, \"click\"], [1, \"animated-hover\", \"wipe-btn\", 3, \"click\"], [1, \"section-container\"], [3, \"label1\", \"label2\", \"defaultVal\", \"elemID\", \"state\", 4, \"ngIf\"], [\"type\", \"text\", \"name\", \"Email\", \"id\", \"emailInput\", \"placeholder\", \"Email\", 1, \"form-input\", 3, \"disabled\", \"value\"]],\n    template: function UserSettingsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, UserSettingsComponent_div_0_Template, 5, 1, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"h3\", 2);\n        i0.ɵɵtext(3, \"User Settings\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"form\", 3, 4);\n        i0.ɵɵlistener(\"submit\", function UserSettingsComponent_Template_form_submit_4_listener($event) {\n          return ctx.updateUserSettings($event);\n        });\n        i0.ɵɵelementStart(6, \"p\", 5);\n        i0.ɵɵtext(7, \"Your Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"input\", 6);\n        i0.ɵɵtemplate(9, UserSettingsComponent_p_9_Template, 2, 0, \"p\", 7);\n        i0.ɵɵtemplate(10, UserSettingsComponent_input_10_Template, 1, 2, \"input\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 9)(12, \"app-toggle-switch\", 10);\n        i0.ɵɵlistener(\"state\", function UserSettingsComponent_Template_app_toggle_switch_state_12_listener($event) {\n          return ctx.updateDisconnectMsg($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function UserSettingsComponent_Template_button_click_13_listener($event) {\n          return ctx.updateUserSettings($event);\n        });\n        i0.ɵɵtext(14, \"Submit\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function UserSettingsComponent_Template_button_click_15_listener() {\n          return ctx.wipeApp();\n        });\n        i0.ɵɵtext(16, \"Wipe BaseCamp\");\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.doCloudSync);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"value\", ctx.userName);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.doCloudSync);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.doCloudSync);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"label1\", \"Show Disconnect Message\")(\"label2\", \"Hide Disconnect Message\")(\"defaultVal\", ctx.defaultLabel)(\"elemID\", \"msgToggle\");\n      }\n    },\n    directives: [i4.NgIf, i5.ToggleSwitchComponent],\n    styles: [\".section-container[_ngcontent-%COMP%]{width:90%;height:40%;border-radius:15px 0;margin:auto;background-color:#0000004d;box-shadow:5px 5px 5px #000}.toggle-container[_ngcontent-%COMP%]{height:45%;width:85%;margin:auto}.form-container[_ngcontent-%COMP%]{height:45%;width:85%;margin:auto;display:grid;grid-template-columns:1fr 2fr;grid-template-rows:auto auto auto}.form-input[_ngcontent-%COMP%]{transition:all .3s ease;margin:5px 0 0;height:40px;background-color:var(--bottom-bg-color);border:none}.form-text[_ngcontent-%COMP%]{transition:all .3s ease}.form-btn[_ngcontent-%COMP%]{width:50%;height:40px;background-color:var(--mid-bg-color);border-radius:15px 0;border:none;cursor:pointer;margin-left:100px}.large[_ngcontent-%COMP%]{height:350px;margin-top:15px}.heading-text[_ngcontent-%COMP%]{text-align:center}.error-container[_ngcontent-%COMP%]{height:15%;width:100%;background-color:var(--top-bg-color);transform:translate(-100vw);transition:all 1s ease;text-align:center;border-radius:15px 0}.error-text[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:400}.showError[_ngcontent-%COMP%]{transform:translate(0)}.dull[_ngcontent-%COMP%]    {cursor:default!important;opacity:.3!important}.dull[_ngcontent-%COMP%]    :hover{transform:translate(0)!important;box-shadow:none!important}.wipe-btn[_ngcontent-%COMP%]{margin-top:10px;background-color:#99282a;border:none;width:50%;height:40px;margin-left:100px;border-radius:0 15px}.toggle-container[_ngcontent-%COMP%]{height:40px;width:100%;margin-bottom:10px}\"]\n  });\n  return UserSettingsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}